# Example Dockerfile for Railway deployment
# This file is ignored by Railway due to .railwayignore
# Use this as a reference if you need Docker support in the future
#
# To use: Remove .railwayignore entry for Dockerfile, then rename this file to Dockerfile

FROM php:8.2-cli

# Install required PHP extensions
RUN docker-php-ext-install mbstring dom

# Set working directory
WORKDIR /app

# Copy application files
COPY . /app/

# Generate matrices and sitemaps during build
RUN php scripts/generate_matrix.php || true && \
    php scripts/generate_career_matrix.php || true && \
    php scripts/build_sitemaps.php || true

# Expose port (Railway will set $PORT dynamically)
EXPOSE ${PORT}

# Start PHP built-in server
# Railway will replace $PORT with actual port number
CMD php -S 0.0.0.0:${PORT} -t public

